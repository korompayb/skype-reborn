<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <title>Chat</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body class="container mt-4">
    <h2>Üdv, {{ username }}!</h2>
    <a href="/logout" class="btn btn-danger">Kijelentkezés</a>

    <h3>Online felhasználók</h3>
    <ul id="userList" class="list-group"></ul>

    <script>
        function loadUsers() {
            $.getJSON("/get_users", function(data) {
                $("#userList").empty();
                data.forEach(user => {
                    if (user !== "{{ username }}") {
                        $("#userList").append(`<li class="list-group-item"><a href="/private_chat/${user}">${user}</a></li>`);
                    }
                });
            });
        }
        setInterval(loadUsers, 2000);
    </script>
</body>
</html>